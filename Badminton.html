<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Badminton Match</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    const API_BASE_URL = "http://192.168.1.7:8000/api"; // Replace with your API base URL

    // Function to get query parameters from the URL
    function getQueryParams() {
      const params = new URLSearchParams(window.location.search);
      return {
        matchId: params.get('matchId')
      };
    }

    // Fetch match details using matchId
    async function fetchMatchDetails() {
      const { matchId } = getQueryParams();
      if (!matchId) {
        alert("No matchId provided!");
        return;
      }

      try {
        const response = await axios.get(`${API_BASE_URL}/matches/${matchId}`);
        const match = response.data;

        // Update match details dynamically without reloading the page
        document.getElementById("team1").textContent = match.team1;
        document.getElementById("team2").textContent = match.team2;
        document.getElementById("score").textContent = `${match.score1} - ${match.score2}`;
        document.getElementById("sport").textContent = match.sport;
        document.getElementById("date").textContent = match.date;
        document.getElementById("time").textContent = match.time;
      } catch (error) {
        console.error("Error fetching match details:", error);
      }
    }

    // Fetch the match details when the page loads
    window.onload = fetchMatchDetails;

    // Subtle refresh: Fetch the match details every 500ms and update dynamically
    setInterval(fetchMatchDetails, 500);
  </script>
</head>
<body>
  <div class="container mt-5">
    <h2>Badminton Match Details</h2>
    <div id="match-details">
      <p><strong>Sport:</strong> <span id="sport"></span></p>
      <p><strong>Team 1:</strong> <span id="team1"></span></p>
      <p><strong>Team 2:</strong> <span id="team2"></span></p>
      <p><strong>Score:</strong> <span id="score"></span></p>
      <p><strong>Date:</strong> <span id="date"></span></p>
      <p><strong>Time:</strong> <span id="time"></span></p>
    </div>
  </div>
</body>
</html>
